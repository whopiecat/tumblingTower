<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Interactive physics game"
    />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Tumbling Tower" />

    <link rel="shortcut icon" href="favicon.ico" />
    
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <!-- <link rel="manifest" href="%PUBLIC_URL%/manifest.json" /> -->
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>Tumbling Tower</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="loadingScreen"></div>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
    <!-- Babylon.js -->
    <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/ammo.js"></script>
    <script src="https://preview.babylonjs.com/cannon.js"></script>
    <script src="https://preview.babylonjs.com/Oimo.js"></script>
    <script src="https://preview.babylonjs.com/earcut.min.js"></script>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
    <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
    <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
    <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
    <!--script>src = "https://cdn.babylonjs.com/ammo.js"</script-->
    <!--script src="https://preview.babylonjs.com/ammo.js"></script-->
    <!--script src="https://preview.babylonjs.com/Oimo.js"></script-->

    <style>
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }

        #viewerProgress {
              width: 100%;
              background-color: #ddd;
            }
            #viewerProgressBar {
              width: 1%;
              height: 30px;
              color: #FFF;
              background-color: mediumblue;
              text-align: left;
              padding-top: 5px;
              overflow: hidden;
              font-size: 100%;
            }
            .viewer-wrap {width:50%;height: 50vh;}
            #viewer-overlay-image { z-index: 900; width: 100%;height: 100%;position: relative;top:0px;background-position: center;background-repeat: no-repeat;background-size: cover;}


    </style>
</head>

<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        var canvas = document.getElementById("renderCanvas");
        var sceneToRender = null;
        
        // data /////////////////////////////////////////

/*     function saveData(user, pass) {
        var account = {
            User: user,
            Pass: pass
        };
        //converts to JSON string the Object
        account = JSON.stringify(account);
        //creates a base-64 encoded ASCII string
        account = btoa(account);
        //save the encoded accout to web storage
        localStorage.setItem('_account', account);
    } */

    function saveData(user, pass) {
            var account = {
                User: user,
                Pass: pass
            };
            //converts to JSON string the Object
            account = JSON.stringify(account);
            //creates a base-64 encoded ASCII string
            account = btoa(account);
            //save the encoded accout to web storage
            localStorage.setItem('_account', account);
        }

        // data /////////////////////////////////////////




        //var createDefaultEngine = function () { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true,  disableWebGL2Support: false }); };
        var createDefaultEngine = function () { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true }); };


        var createScene = async function () {
            var scene = new BABYLON.Scene(engine);
            scene.clearColor = new BABYLON.Color3( .5, .5, .5);
            var camera = new BABYLON.ArcRotateCamera("camera", 1 * Math.PI / 3, Math.PI / 2.5, 100, BABYLON.Vector3.Zero(), scene);
             camera.setTarget(BABYLON.Vector3.Zero());


             // GUI - //
            var loadSelectionPanel = function () {

                /*                 var toSize = function (isChecked) {
                                    if (isChecked) {
                                        box.scaling = new BABYLON.Vector3(0.5, 0.5, 0.5);
                                    }
                                    else {
                                        box.scaling = new BABYLON.Vector3(1, 1, 1);
                                    }
                                } */

                /*                 var toPlace = function (isChecked) {
                                    if (isChecked) {
                                        box.position.y = 1.5;
                                    }
                                    else {
                                        box.position.y = 0.5;
                                    }
                                } */

                /*        var setColor = function (but) {
                           switch (but) {
                               case 0:
                                   box.material = blueMat;
                                   break
                               case 1:
                                   box.material = redMat;
                                   break
                           }
                       } */

                /* var boxSlider = BABYLON.MeshBuilder.CreateBox("boxSlider", {}, scene);
                boxSlider.position.x = 8.0;
                boxSlider.position.y = 1.0;
                boxSlider.position.z = 2.5; */

/*                 var orientateY = function (angle) {
                    boxSlider.rotation.y = angle;
                    boxSlider.rotation.x = angle;
                } */

                var setImpulse = function (value) {
                    impulseMagnitude = value;
                    //console.log("setImpulse value " + value );
                }

                var displayValue = function (value) {
                    // return BABYLON.Tools.ToDegrees(value) | 0;
                    //return (value | 10);
                    // value = (Math.round(value * 10) / 10); // (Math.round(value * 10) / 10);
                    value = (Math.floor(value));
                    return value;
                }

                var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UImenu");
                
            var textGroup = new BABYLON.GUI.CheckboxGroup("Tumbling Towers");
          //  textGroup.TextBlock.color = "white";
        // var textGroup = new BABYLON.GUI.TextBlock();
           // textGroup.height = 0.30;
            //    var text1 = new BABYLON.GUI.TextBlock();
            //    text1.horizontalTextAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
            //    text1.text = "Hello world";
            //    text1.color = "#0394fc";
            //    text1.fontSize = 14;
               // advancedTexture.addControl(text1); 

                var panel = new BABYLON.GUI.SelectionPanel("panel");
                panel.fontSize = 20;
                panel.width = 0.20;
                panel.height = 0.60;//0.18;
                panel.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
                panel.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
                panel.color = "blue";
                panel.background = "#0394fc";
             //   panel.text = "Hello world";
                advancedTexture.addControl(panel);



                var transformGroup = new BABYLON.GUI.CheckboxGroup("Transformation");
                transformGroup.addCheckbox("Small", );
                transformGroup.addCheckbox("High", ); 
               
                var colorGroup = new BABYLON.GUI.RadioGroup("Color");
                colorGroup.addRadio("Blue",  true);
                colorGroup.addRadio("Red", );
                /*
                (method) BABYLON.GUI.SliderGroup.addSlider(label: string, func?: (v: number) => void,
                 unit?: string, min?: number, max?: number, value?: number, onValueChange?: (v: number) => number): void
                   Adds a slider to the SelectorGroup
                
                 @param - label is the label for the SliderBar
                 @param - func is the function called when the Slider moves
                 @param - unit is a string describing the units used, eg degrees or metres
                 @param - min is the minimum value for the Slider
                 @param - max is the maximum value for the Slider
                 @param - value is the start value for the Slider between min and max
                 @param - onValueChange is the function used to format the value displayed, eg radians to degrees
                 */
                var rotateGroup = new BABYLON.GUI.SliderGroup("How Tall", "S");
                // rotateGroup.addSlider("Force", orientateY, "impulse", 0, 0.1 * Math.PI, 7, displayValue) // "degs"
                // works great   rotateGroup.addSlider("Force",setImpulse," ", 1, 10, 1, displayValue)
                rotateGroup.addSlider("Number of Block rows", setImpulse, " ", 1, 10, 1, displayValue)

                // console.log("@@@@@@@@@@@ value @@@@@@@@@@@@ " + value);
                // impulseMagnitude = impulseMagnitudeSliderValue;
                panel.addGroup(textGroup);
                panel.addGroup(transformGroup);
                panel.addGroup(colorGroup);
                panel.addGroup(rotateGroup);
                
            }

            scene.debugLayer.show();
            loadSelectionPanel();

            return scene;
        };


        var engine;
        try {
            engine = createDefaultEngine();
        } catch (e) {
            console.log("the available createEngine function failed. Creating the default engine instead");
            engine = createDefaultEngine();
        }
        if (!engine) throw 'engine should not be null.';
        scene = createScene();;
        scene.then(returnedScene => { sceneToRender = returnedScene; });


        engine.runRenderLoop(function () {
            if (sceneToRender && sceneToRender.activeCamera) {
                sceneToRender.render();
            }
        });

        // Resize
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
</body>

</html> -->