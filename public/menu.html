<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Interactive physics game" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Tumbling Tower" />

    <link rel="shortcut icon" href="favicon.ico" />

    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <!-- <link rel="manifest" href="%PUBLIC_URL%/manifest.json" /> -->
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>Tumbling Tower menu</title>
</head>

<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="loadingScreen"></div>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
</body>

</html>
<!-- Babylon.js -->
<script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
<script src="https://preview.babylonjs.com/ammo.js"></script>
<script src="https://preview.babylonjs.com/cannon.js"></script>
<script src="https://preview.babylonjs.com/Oimo.js"></script>
<script src="https://preview.babylonjs.com/earcut.min.js"></script>
<script src="https://preview.babylonjs.com/babylon.js"></script>
<script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
<script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
<script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
<script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
<script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
<script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
<script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
<!--script>src = "https://cdn.babylonjs.com/ammo.js"</script-->
<!--script src="https://preview.babylonjs.com/ammo.js"></script-->
<!--script src="https://preview.babylonjs.com/Oimo.js"></script-->

<style>
    html,
    body {
        overflow: hidden;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }

    #renderCanvas {
        width: 100%;
        height: 100%;
        touch-action: none;
    }

    #viewerProgress {
        width: 100%;
        background-color: #ddd;
    }

    #viewerProgressBar {
        width: 1%;
        height: 30px;
        color: #FFF;
        background-color: mediumblue;
        text-align: left;
        padding-top: 5px;
        overflow: hidden;
        font-size: 100%;
    }

    .viewer-wrap {
        width: 50%;
        height: 50vh;
    }

    #viewer-overlay-image {
        z-index: 900;
        width: 100%;
        height: 100%;
        position: relative;
        top: 0px;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
    }
</style>
</head>

<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        var canvas = document.getElementById("renderCanvas");
        var sceneToRender = null;
        var button;
        value = 0;
        // data /////////////////////////////////////////

        /*     function saveData(user, pass) {
                var account = {
                    User: user,
                    Pass: pass
                };
                //converts to JSON string the Object
                account = JSON.stringify(account);
                //creates a base-64 encoded ASCII string
                account = btoa(account);
                //save the encoded accout to web storage
                localStorage.setItem('_account', account);
            } */

        /*     function saveData(user, pass) {
                console.log("saveData called");
                    var account = {
                        User: user,
                        Pass: pass
                        
                    };
                    //converts to JSON string the Object
                    account = JSON.stringify(account);
                    //creates a base-64 encoded ASCII string
                    account = btoa(account);
                    //save the encoded accout to web storage
                    localStorage.setItem('_account', account);
                   // window.location.replace("http://doc.babylonjs.com/"); 
                   window.location.replace("/test/tower2/index.html"); 
                    // window.open("http://doc.babylonjs.com/","_self");
                    // window.location.replace("http://www.w3schools.com");
                    // window.location.href = "http://example.com";
                } */






        // data /////////////////////////////////////////

        var displayValueTotal = function (value) {
            // adjust value to single 1.0, 2.0 verses 1.67536757675, 2.037673567
            // return BABYLON.Tools.ToDegrees(value) | 0;
            //return (value | 10);
            // value = (Math.round(value * 10) / 10); // (Math.round(value * 10) / 10);
            value = (Math.floor(value));
            three = value;
            //console.log("three set to " + value + " in displayValueTotal");
            return value;
        }


        //var createDefaultEngine = function () { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true,  disableWebGL2Support: false }); };
        var createDefaultEngine = function () { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true }); };


        var createScene = async function () {
            var scene = new BABYLON.Scene(engine);
            scene.clearColor = new BABYLON.Color3(.5, .5, .5);
        //    var camera = new BABYLON.ArcRotateCamera("camera", 1 * Math.PI / 3, Math.PI / 2.5, 100, BABYLON.Vector3.Zero(), scene);
        //const camera = new BABYLON.ArcRotateCamera("camera", Math.PI / 2, Math.PI / 2, 4, BABYLON.Vector3.Zero(), scene);
        const camera = new BABYLON.ArcRotateCamera("camera",0.0, 1.0, 8,BABYLON.Vector3.Zero(),scene);
            camera.setTarget(BABYLON.Vector3.Zero());

     camera.attachControl(canvas, true);
     camera.lowerRadiusLimit = 5;
    camera.upperRadiusLimit = 30;


/*             var light = new BABYLON.DirectionalLight("dir02", new BABYLON.Vector3(0.2, -1, 0), scene);
            light.position = new BABYLON.Vector3(1.527, -12.032, -160.606);// (-76.104, -12.032, -96.969);
            light.direction = new BABYLON.Vector3(0.081, 0.898, -0.433); // (0.191, -0.953, 0.233);
            //light.direction = new BABYLON.Vector3(0.0, 1.0, 0.0);
            light.intensity = 0.6;// 0.6 */

            var light = new BABYLON.HemisphericLight("sun", new BABYLON.Vector3(0,1,0), scene);



            // GUI - //
            var loadSelectionPanel = function () {

                /*                 var toSize = function (isChecked) {
                                    if (isChecked) {
                                        box.scaling = new BABYLON.Vector3(0.5, 0.5, 0.5);
                                    }
                                    else {
                                        box.scaling = new BABYLON.Vector3(1, 1, 1);
                                    }
                                } */

                /*                 var toPlace = function (isChecked) {
                                    if (isChecked) {
                                        box.position.y = 1.5;
                                    }
                                    else {
                                        box.position.y = 0.5;
                                    }
                                } */

                /*        var setColor = function (but) {
                           switch (but) {
                               case 0:
                                   box.material = blueMat;
                                   break
                               case 1:
                                   box.material = redMat;
                                   break
                           }
                       } */

                /* var boxSlider = BABYLON.MeshBuilder.CreateBox("boxSlider", {}, scene);
                boxSlider.position.x = 8.0;
                boxSlider.position.y = 1.0;
                boxSlider.position.z = 2.5; */

                /*                 var orientateY = function (angle) {
                                    boxSlider.rotation.y = angle;
                                    boxSlider.rotation.x = angle;
                                } */





                var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UImenu");
               // advancedTexture.rootContainer.scaleX = window.devicePixelRatio;
              //  advancedTexture.rootContainer.scaleY = window.devicePixelRatio;

                // number of blocks
                var totalValue = new BABYLON.GUI.SliderGroup("Height", "S");
                totalValue.zIndex = 3;
                totalValue.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
                totalValue.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
                totalValue.addSlider("Total Blocks", setTotalBlocks, " ", 6, 84, 30, displayValueTotal)
                totalValue.width = '90%';
                // number of blocks

                 // friction
                 var totalFriction = new BABYLON.GUI.SliderGroup("Friction", "S");
                totalFriction.zIndex = 3;
                totalFriction.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
                totalFriction.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
                totalFriction.addSlider("Force between bodies", setTotalFriction, " ", 6, 84, 30, displayValueTotal)
                totalFriction.width = '90%';
                // friction

                 // mass
                 var totalMass = new BABYLON.GUI.SliderGroup("Mass", "S");
                totalMass.zIndex = 3;
                totalMass.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
                totalMass.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
                totalMass.addSlider("Total Matter", setTotalMass, " ", 6, 84, 30, displayValueTotal)
                totalMass.width = '90%';
                // mass







                /*              TextBlock       Property	    Type	`Comments
                                lineSpacing(0px)	valueAndUnit	        Can be set to configure vertical spacing between text lines
                                text(null)	    string	    Text to display
                                textWrapping(false)	boolean             	Can be set to true to enable text wrapping.
                                resizeToFit(false)	boolean	                Can be set to true to enable resize to fit.
                                textHorizontalAlignment(2)	number	        Can be set to left, right or center
                                textVerticalAlignment(2)	number	        Can be set to top, bottom or center
                                outlineWidth(0)	number	                    Text outline size, in pixels.
                                outlineColor("white")	string	            Text outline color.
                                wordSplittingFunction	string	            Function to use to split the text into words
                               
                                The control currently provides 1 observable:
                                Observables	Comments
                                onTextChangedObservable	Raised when the text has changed */


                var panel = new BABYLON.GUI.SelectionPanel("panel");
                panel.fontSize = 20;
                panel.width = 0.35;//   0.25;
                panel.height = 0.40;//0.25;
                panel.thickness = 4;
                panel.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
                panel.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
                panel.zIndex = 1;
                /* Change Color Scheme  */
                panel.color = "orange";// blue
                panel.background = "#336699"; // "#0394fc"
                panel.barColor = "orange"; // "#4F7DF2"
                panel.headerColor = "white";
                panel.buttonColor = "orange";
                panel.buttonBackground = "#684502"
                panel.isVertical = true;


                // Babylon.js playground reference  https://playground.babylonjs.com/#BXMTCD#2


                advancedTexture.addControl(panel);

                /*(method) BABYLON.GUI.CheckboxGroup.addCheckbox(text: string, func?: (s: boolean) => void, checked?: boolean): void
                Adds a checkbox as a control
                @param - text is the label for the selector
                @param - func is the function called when the Selector is checked
                @param - checked is true when Selector is checked */




                //            var spacerGroup1 = new BABYLON.GUI.CheckboxGroup("");
               //             spacerGroup1.height = '200px';
                //            var spacerGroup2 = new BABYLON.GUI.CheckboxGroup("");
                // ------              transformGroup.addCheckbox("Small", );
                // ------              transformGroup.addCheckbox("High", ); 


                /* 
                                (method) BABYLON.GUI.RadioGroup.addRadio(label: string, func?: (n: number) => void, checked?: boolean): void
                                Adds a radio button as a control
                
                                @param - label is the label for the selector
                                @param - func is the function called when the Selector is checked
                                @param - checked is true when Selector is checked */

                //var colorGroup = new BABYLON.GUI.RadioGroup("");
                //colorGroup.addRadio("Play",setData);
                //colorGroup.addRadio("Red", );
                //colorGroup.addRadio("", );


                /*                 var createLabel = function (mesh) { // follows mesh
                                    var label = new BABYLON.GUI.Rectangle("label for " + mesh.name);
                                    label.background = "black"
                                    label.height = "30px";
                                    //label.alpha = 0.5;
                                    label.width = "100px";
                                    label.cornerRadius = 20;
                                    label.thickness = 1;
                                    label.linkOffsetY = 30;
                                    advancedTexture.addControl(label);
                                    label.linkWithMesh(mesh);
                
                                    var text1 = new BABYLON.GUI.TextBlock();
                                    text1.text = mesh.name;
                                    text1.color = "white";
                                    label.addControl(text1);
                
                                    return label;
                                } */

                /*
                (method) BABYLON.GUI.SliderGroup.addSlider(label: string, func?: (v: number) => void,
                 unit?: string, min?: number, max?: number, value?: number, onValueChange?: (v: number) => number): void
                   Adds a slider to the SelectorGroup
                
                 @param - label is the label for the SliderBar
                 @param - func is the function called when the Slider moves
                 @param - unit is a string describing the units used, eg degrees or metres
                 @param - min is the minimum value for the Slider
                 @param - max is the maximum value for the Slider
                 @param - value is the start value for the Slider between min and max
                 @param - onValueChange is the function used to format the value displayed, eg radians to degrees
                 */
         //       var totalValue = new BABYLON.GUI.SliderGroup("Height", "S");
         //       totalValue.addSlider("Total Blocks", setTotalBlocks, " ", 6, 84, 30, displayValueTotal)


                /*                 button = BABYLON.GUI.Button.CreateSimpleButton('btn', 'Button');
                                button.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;
                                button.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;
                                button.width = '100px';
                                button.height = '50px';
                                button.left = '30%';
                                button.top = '30px'; */


                // advancedTexture.rootContainer.scaleX = window.devicePixelRatio;
                // advancedTexture.rootContainer.scaleY = window.devicePixelRatio;

/*                 var button1 = BABYLON.GUI.Button.CreateSimpleButton("but1", 'Hi there and greetings!');
                button1.width = '250px';
                button1.height = '30px';
                button1.color = "black";
                button1.fontSize = 20;
                button1.thickness = 0;
                button1.background = "white";
                // advancedTexture.addControl(button1); */


                /* 
                // reference https://www.babylonjs-playground.com/#3VMTI9#4
                                var slider = new BABYLON.GUI.Slider();
                                // slider.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;
                                slider.minimum = 0;
                                slider.maximum = 400;
                                slider.color = "#faba3d";
                                slider.background = "#e2e2e2";
                                slider.value = 200;
                                slider.height = "220px";
                                slider.width = "300px";
                                // slider.isVertical = true;
                                // slider.onValueChangedObservable.add(function(value) {
                                //     var zoomValue = 400-value;
                                // });
                                sliderPanel.addControl(slider);
                                slider.rotation = -Math.PI / 2;
                
                
                 */
                //advancedTexture.addControl(button);

// TITLE ////////////////////////////////////////////////

                let loadTitle = function () {
                var titleRectangle = new BABYLON.GUI.Rectangle('');
                titleRectangle.width = 0.35;    //  .width = 0.35;
                titleRectangle.height = .1;
                titleRectangle.top = -285;// -285; 
                titleRectangle.thickness = 4;
                titleRectangle.color = "orange";
                titleRectangle.background = "#336699";
                titleRectangle.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
                titleRectangle.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;
                advancedTexture.addControl(titleRectangle);

                var title = new BABYLON.GUI.TextBlock();
                title.color = "white";
                title.outlineWidth = 5.6;
                title.outlineColor = "black";
                title.lineSpacing = 1;
                title.textWrapping = true;
                title.textHorizontalAlignment = 2;// 1 = right, 2 = center, 3 = left
                title.textVerticalAlignment = 2;// 1 = bottom, 2 = center, 3 = ?
                title.fontStyle = "italic";
                title.fontFamily = "Verdana";
                title.fontSize = 26;
                // title.fontSize = "100%";
                title.text = "Tumbling Tower";
                titleRectangle.zIndex = 2;
                titleRectangle.addControl(title);
                title.onLinesReadyObservable.add(() => {
                    var textHeight = (title.fontOffset.height) * title.lines.length;
                    var ratioHeights = title.parent.heightInPixels / textHeight;
                    var textWidth = title.lines[0].width;
                    var ratioWidths = title.parent.widthInPixels / textWidth;
                    if (ratioWidths < 1) {
                        title.fontSize = parseFloat(title.fontSizeInPixels) * ratioWidths + "px";
                    }
                });
            }

// DIRECTIONS ////////////////////////////////////////////////

                let loadDirections = function () { 
                var directionsRectangle = new BABYLON.GUI.Rectangle('');
                directionsRectangle.width = .35;    // .width = 0.35;
                directionsRectangle.height = .10;//.10
                directionsRectangle.top = -208;//-208; // go bigger negative number to move up
                directionsRectangle.thickness = 4;
                directionsRectangle.color = "orange";
                advancedTexture.addControl(directionsRectangle);

                var directions = new BABYLON.GUI.TextBlock();
                directions.color = "white";
                directions.outlineWidth = 5.6;
                directions.outlineColor = "black";
                directions.lineSpacing = 1;
                directions.textWrapping = true;
                directions.textHorizontalAlignment = 2;// 1 = right, 2 = center, 3 = left
                directions.textVerticalAlignment = 2;// 1 = bottom, 2 = center, 3 = ?
                directions.fontStyle = "italic";
                directions.fontFamily = "Verdana";
                directions.fontSize = 20;
                // directions.fontSize = "100%";
                directions.text = "Adjust Tower building settings";
                directionsRectangle.zIndex = 2;
                directionsRectangle.addControl(directions);
                directions.onLinesReadyObservable.add(() => {
                    var textHeight = (directions.fontOffset.height) * directions.lines.length;
                    var ratioHeights = directions.parent.heightInPixels / textHeight;
                    var textWidth = directions.lines[0].width;
                    var ratioWidths = directions.parent.widthInPixels / textWidth;
                    if (ratioWidths < 1) {
                        directions.fontSize = parseFloat(directions.fontSizeInPixels) * ratioWidths + "px";
                    }
                });
            }

// SPACER ////////////////////////////////////////////////
                
/*                 var textGroup = new BABYLON.GUI.CheckboxGroup("spacer");
                //  textGroup.TextBlock.color = "white";
                 var textGroup = new BABYLON.GUI.TextBlock();
                     textGroup.height = 0.70;
                   //  textGroup.thickness = 0.7;
                    var text1 = new BABYLON.GUI.TextBlock();
                    text1.horizontalTextAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
                    text1.text = "Hello world";
                //     textGroup.color = "#0394fc";
                //    text1.fontSize = 14;
                text1.zIndex = 2;
                 advancedTexture.addControl(text1); 
 */

 
              //  var totalValueHolder = new BABYLON.GUI.TextBlock();
              //  totalValueHolder.color = "white";
              //  totalValueHolder.outlineWidth = 5.6;
/*                directions.outlineColor = "black";
                directions.lineSpacing = 1;
                directions.textWrapping = true;
                directions.textHorizontalAlignment = 2;// 1 = right, 2 = center, 3 = left
                directions.textVerticalAlignment = 2;// 1 = bottom, 2 = center, 3 = ?
                directions.fontStyle = "italic";
                directions.fontFamily = "Verdana";
                directions.fontSize = 20;
                // directions.fontSize = "100%";
                directions.text = "Adjust Tower building settings";
                */
               // loadTotalRectangle.zIndex = 2;

             //   loadTotalRectangle.addControl(totalValue);
                /*
                directions.onLinesReadyObservable.add(() => {
                    var textHeight = (directions.fontOffset.height) * directions.lines.length;
                    var ratioHeights = directions.parent.heightInPixels / textHeight;
                    var textWidth = directions.lines[0].width;
                    var ratioWidths = directions.parent.widthInPixels / textWidth;
                    if (ratioWidths < 1) {
                        directions.fontSize = parseFloat(directions.fontSizeInPixels) * ratioWidths + "px";


                    }
                }); 
                */




                // console.log("@@@@@@@@@@@ value @@@@@@@@@@@@ " + value);
                // impulseMagnitude = impulseMagnitudeSliderValue;
                //     advancedTexture.addControl(title); // title
                // panel.addControl(title);
loadTitle();
loadDirections();

                panel.addGroup(totalValue); // total block count >> move by changing panel height
                panel.addGroup(totalFriction);
                panel.addGroup(totalMass);
                
                //    advancedTexture.addControl(button);
                //    advancedTexture.addControl(button1);
                //   panel.addGroup(button); // shows if just above line, but not current.


                var setTotalBlocks = function (value) {
                    // sets the blocks count based on value
                    crateCountTotalGoal = value;
                    //console.log("setImpulse value " + value );
                    return crateCountTotalGoal;
                }

                var setTotalFriction = function (value) {
                    // sets the friction based on value
                  //  crateCountTotalGoal = value;
                    //console.log("setImpulse value " + value );
                 //   return crateCountTotalGoal;
                }

                var setTotalMass = function (value) {
                    // sets the mass based on value
                  //  crateCountTotalGoal = value;
                    //console.log("setImpulse value " + value );
                 //   return crateCountTotalGoal;
                }
            }

            let const3Dmenu = function ()   {
                var anchor = new BABYLON.TransformNode("");
                camera.attachControl(canvas, true);
                // Create the 3D UI manager
                var manager = new BABYLON.GUI.GUI3DManager(scene);

                var panel = new BABYLON.GUI.CylinderPanel();
                panel.margin = 0.75;

                manager.addControl(panel);
                panel.linkToTransformNode(anchor);
              //  panel.position.z = -1.5;

                // The first parameter can be used to specify which mesh to import. Here we import all meshes
                BABYLON.SceneLoader.ImportMesh("", "https://david.blob.core.windows.net/babylonjs/MRTK/", "pushButton.glb", scene, function (newMeshes) {
            //        pushButtonCore = newMeshes[0];
           //         makePushButtons();
            //        pushButtonCore.setEnabled(false);
                });


                
/*     function makePushButton(mesh, hoverColor) {
        var cylinder = mesh.getChildMeshes(false, (node) => { return node.name.indexOf("Cylinder") !== -1 })[0];
        var cylinderMat = cylinder.material.clone();
        cylinderMat.albedoColor = new BABYLON.Color3(0.5, 0.19, 0);
        cylinder.material = cylinderMat;

        var pushButton = new BABYLON.GUI.MeshButton3D(mesh, "pushButton" + index);
        pushButton.pointerEnterAnimation = () => {
            cylinder.material.albedoColor = hoverColor;
        };
        pushButton.pointerOutAnimation = () => {
             cylinder.material.albedoColor = new BABYLON.Color3(0.5, 0.19, 0);
        };
        pushButton.pointerDownAnimation = () => {
            cylinder.position.y = 0;
        }
        pushButton.pointerUpAnimation = () => {
            cylinder.position.y = 0.21;
        }
        pushButton.onPointerDownObservable.add(() => {
            console.log(pushButton.name + " pushed.");
        });
        panel.addControl(pushButton);
        index++;
    } */

    function makePushButtons() {
        var color;
        var newPushButton;
        var colors = [{r: 0.25, g:0, b:0}, {r: 0, g:0.25, b:0}, {r: 0, g:0, b:0.25},
                      {r: 0.25, g:0.25, b:0}, {r: 0, g:0.25, b:0.25}, {r: 0.25, g:0, b:0.25}];

        panel.blockLayout = true;
        for (var i = 0; i < 10; i++) {
            newPushButton = pushButtonCore.clone("pushButton" + index);
            color = new BABYLON.Color3(colors[i % 6].r, colors[i % 6].g, colors[i % 6].b);
            makePushButton(newPushButton, color);
        }
        panel.blockLayout = false;
    }
    }
        
let _set3dMeshMenu = function() {
    var anchor = new BABYLON.TransformNode("transformNode");
    var manager = new BABYLON.GUI.GUI3DManager(scene);
   // var panel = new BABYLON.GUI.CylinderPanel();
  var panel = new BABYLON.GUI.StackPanel3D();

   // REFERENCE https://doc.babylonjs.com/divingDeeper/gui/gui3D#gui3dmanager

 //   panel.margin = 0.75;
 manager.addControl(panel);
 //   panel.linkToTransformNode(anchor);
              //  panel.position.z = -1.5;

/*     (method) BABYLON.MeshBuilder.CreateCylinder(name: string, options: {
        height?: number;
        diameterTop?: number;
        diameterBottom?: number;
        diameter?: number;
        tessellation?: number;
        subdivisions?: number;
        arc?: number;
        faceColors?: BABYLON.Color4[];
        ... 7 more ...;
        backUVs?: BABYLON.Vector4;
    }, scene ?: BABYLON.Scene): BABYLON.Mesh */

/*     (method) BABYLON.MeshBuilder.CreateTube(name: string, options: {
        path: BABYLON.Vector3[];
        radius?: number;
        tessellation?: number;
        radiusFunction?: (i: number, distance: number) => number;
        cap?: number;
        arc?: number;
        updatable?: boolean;
        ... 4 more ...;
        invertUV?: boolean;
    }, scene ?: BABYLON.Scene): BABYLON.Mesh */

// maybe update button with : REFERENCE (die as in pair of dice, face):
/* let text = "4";
let color = "blue";
let size = 1.5;
var makeTextPlane = function(text, color, size) {
        var dynamicTexture = new BABYLON.DynamicTexture("DynamicTexture", 50, scene, true);
        dynamicTexture.hasAlpha = true;
        dynamicTexture.drawText(text, 5, 40, "bold 36px Arial", color , "transparent", true);
        var plane = new BABYLON.Mesh.CreatePlane("TextPlane", size, scene, true);
        plane.material = new BABYLON.StandardMaterial("TextPlaneMaterial", scene);
        plane.material.backFaceCulling = false;
        plane.material.specularColor = new BABYLON.Color3(0, 0, 0);
        plane.material.diffuseTexture = dynamicTexture;
        plane.rotation.y = 250.0;
       // plane.rotation.x = 10.0;
        return plane;
    }; 

makeTextPlane(text, color, size);

 */

    //  material

    let buttonBodyDownMaterial = new BABYLON.StandardMaterial("buttonBodyDownMaterial", scene);
    buttonBodyDownMaterial.diffuseColor = new BABYLON.Color3(0, 0.64, 0.8);//0.5, 0.19, 0
    buttonBodyDownMaterial.specularColor = new BABYLON.Color3(1.0, 1.0, 1.0);

    let buttonBodyUpMaterial = new BABYLON.StandardMaterial("buttonBodyUpMaterial", scene);
    buttonBodyUpMaterial.diffuseColor = new BABYLON.Color3(0, 0.64, 0.8);//0.5, 0.19, 0
    buttonBodyUpMaterial.specularColor = new BABYLON.Color3(1.0, 1.0, 1.0);

    let hoverColor = new BABYLON.StandardMaterial("hoverColor", scene);
    hoverColor.diffuseColor = new BABYLON.Color3(0.95, 0.91, 0.36);
    hoverColor.specularColor = new BABYLON.Color3(1.0, 1.0, 1.0);
    hoverColor.emissiveColor = new BABYLON.Color3(1,1,1);

    let backgroundMaterial = new BABYLON.StandardMaterial("buttonCoreMaterial", scene);
    backgroundMaterial.diffuseColor = new BABYLON.Color3(0.27, 0.11, 0.11, 0.88);
    backgroundMaterial.specularColor = new BABYLON.Color3(1.0, 1.0, 1.0);

    var redMat = new BABYLON.StandardMaterial("red", scene);
    redMat.emissiveColor = new BABYLON.Color3(1,0,0); // (1,0,0)

//  material










    // buttons 
    const buttonBodyDown = BABYLON.MeshBuilder.CreateCylinder("buttonBodyDown", { // TRY TUBE
        height:  0.2,
        diameterTop: 0.70,
        tessellation: 3,
        diameter: 2.5
    },scene);
    buttonBodyDown.position.x = 0.0;
    buttonBodyDown.position.y = 0.0;
    buttonBodyDown.position.z = 0.0;
   buttonBodyDown.material = buttonBodyDownMaterial;

   const buttonBodyUp = BABYLON.MeshBuilder.CreateCylinder("buttonBodyUp", { // TRY TUBE
        height:  0.2,
        diameterTop: 0.70,
        tessellation: 3,
        diameter: 2.5
    },scene);
    buttonBodyUp.position.x = 0.0;
    buttonBodyUp.position.y = 0.0;
    buttonBodyUp.position.z = 0.0;
    buttonBodyUp.rotation.y = 45.0;
    buttonBodyUp.material = buttonBodyUpMaterial;

 

 
// buttons

    // Group button parts

    //create parent object 
/*     var parentObj = BABYLON.MeshBuilder.CreateBox('parent', { size: 0.5 }, scene);
    var midNode = new BABYLON.TransformNode("midNode");
    midNode.parent = parentObj;
    //child object 1
    var childObj1 = BABYLON.MeshBuilder.CreateSphere("sphere1", { diameter: 0.5, segments: 32 }, scene);
    //positioning is coming from an external file, I can scale down the entire group 
    //I want to take the center of the grouping and place it on 0,0,0
   // childObj1.position.x = 25;
   // childObj1.position.z = 25;
   childObj1.position.y = 0.45;
   // childObj1.parent = midNode;
 */
// Group button parts



/*     constructor BABYLON.GUI.MeshButton3D(mesh: BABYLON.Mesh, name ?: string): BABYLON.GUI.MeshButton3D
    Creates a new 3D button based on a mesh
    @param - mesh mesh to become a 3D button
    @param - name defines the control name
 */

 let pushButtonDown = new BABYLON.GUI.MeshButton3D(buttonBodyDown, "buttonBodyDown");
 let pushButtonUp = new BABYLON.GUI.MeshButton3D(buttonBodyUp, "buttonBodyUp");



 let buttonBodyDownMat = buttonBodyDown.material.clone();
 let buttonBodyUpMat = buttonBodyUp.material.clone();
 //buttonBodyMat.albedoColor = new BABYLON.Color3(0.5, 0.19, 0);
// buttonBodyDown.material = buttonBodyDownMat;
 buttonBodyUp.material = buttonBodyUpMat;

       

        pushButtonUp.pointerOutAnimation = () => {
            buttonBodyUp.material = buttonBodyUpMat;
        };

         pushButtonUp.pointerEnterAnimation = () => {
           buttonBodyUp.material = redMat;//  hoverColor
        }; 

        pushButtonDown.pointerOutAnimation = () => {
            buttonBodyDown.material = buttonBodyDownMat;
        };

         pushButtonDown.pointerEnterAnimation = () => {
           buttonBodyDown.material = redMat;
        }; 

        
        






    panel.addControl(pushButtonDown);
    panel.addControl(pushButtonUp);
   //pushButtonUp.rotation.x = 90;

        pushButtonUp.position.x = -1.4; //  position.x = --1.2;

   //manager.addControl(pushButton);
    //    pushButton.linkToTransformNode(anchor);

    //    panel.addControl(pushButtonBody);
    //    pushButtonBody.linkToTransformNode(anchor);
        
        //buttonCore1.position.z = -0.891;
       // buttonCore1.position.z = -0.891;

let background = BABYLON.MeshBuilder.CreateBox("background", {width: 10, height: 0.5, depth: 5 }, scene)
background.material = backgroundMaterial;
    background.position.x = 0.0;
    background.position.y = -0.329;
    background.position.z = 0.0;

}


            function setData() {
                // (A) VARIABLES TO PASS
                console.log("////////// setData called //////////");


                var first = "Foo Bar",
                    second = ["Hello", "World"];


                // (B) SAVE TO LOCAL STORAGE
                // localStorage.setItem("KEY", "VALUE");
                localStorage.setItem("first", first);
                // local storage cannot store array and objects
                // JSON encode before storing, convert to string
                localStorage.setItem("second", JSON.stringify(second));
                localStorage.setItem("three", three);
                // (C) REDIRECT OR OPEN NEW WINDOW IF YOU WANT
                // window.open("index.html _self");
                window.open('index.html', '_self', false)
                //location.href = "2b-local-storage.html";
            }

// --- scene.debugLayer.show();
//            loadSelectionPanel();
//const3Dmenu();
_set3dMeshMenu();
// Reference 3D push button : https://playground.babylonjs.com/#8Y780Y#20
            //   saveData("Paul", "password");


            /* button.actionManager = new BABYLON.ActionManager(scene);
    
    button.actionManager.registerAction(
           new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger,function(event){
               var pickedMesh = event.meshUnderPointer; 
   
               window.open("http://doc.babylonjs.com/");
           })
       ); */




            return scene;
        };


        var engine;
        try {
            engine = createDefaultEngine();
        } catch (e) {
            console.log("the available createEngine function failed. Creating the default engine instead");
            engine = createDefaultEngine();
        }
        if (!engine) throw 'engine should not be null.';
        scene = createScene();;
        scene.then(returnedScene => { sceneToRender = returnedScene; });


        engine.runRenderLoop(function () {
            if (sceneToRender && sceneToRender.activeCamera) {
                sceneToRender.render();
            }
        });

        // Resize
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>

    <input type="button" value="Store To Local Storage" onclick="store()" />

</body>

</html> -->